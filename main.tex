% !TEX TS-program = pdflatex
\documentclass[15pt,aspectratio=169]{beamer}
% ------------------------------------------------------------------
% Theme \& visual tweaks
% ------------------------------------------------------------------
\usetheme{metropolis}
\metroset{progressbar=frametitle}
% Slightly darker boxes for better contrast
\definecolor{blockgray}{RGB}{225,225,225}  % ~20 % gray
% --------------------------------------------------------------
% Encoding \& fonts
% --------------------------------------------------------------
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{pifont}
\usepackage{booktabs}

\usepackage{fontawesome5}  % for simple professional icons

% --------------------------------------------------------------
% TikZ \& PGFPlots
% --------------------------------------------------------------
\usepackage{tikz,adjustbox}
\usetikzlibrary{positioning,arrows.meta,fit, calc,trees}
\usepackage{pgfplots}
\pgfplotsset{compat=newest,plot coordinates/math parser=false}

% --------------------------------------------------------------
% Maths \& abbreviations
% --------------------------------------------------------------
\usepackage{amsmath,physics,xspace}
\newcommand{\tfidf}{TF-IDF\xspace}
\newcommand{\TFIDF}{Term-Frequency-Inverse-Document-Frequency\xspace}
\newcommand{\IForest}{Isolation Forest\xspace}
\newcommand{\RForest}{Random Forest\xspace}
\newcommand{\LOC}{lines of code\xspace}

% --------------------------------------------------------------
% TikZ box styles (updated grey)
% --------------------------------------------------------------
\tikzset{
  box/.style = {rectangle, draw, rounded corners=3pt,
                text width = 4.6cm, align = center,
                minimum height = 1.05cm,
                font = \small, fill = blockgray},
  side/.style = {box, text width = 3.8cm, fill = blue!7},
  arr/.style  = {-{Stealth[length=3mm,width=2mm]}, thick},
  lab/.style  = {font=\scriptsize, sloped, anchor=south, midway}
}

% --------------------------------------------------------------
% Meta data
% --------------------------------------------------------------
\title{Use of AI for Log Analysis in CI/CD Pipelines}
\subtitle{Bachelor Thesis - Defence}
\author{Maid Ališi\'c}
\institute{FH Oberösterreich · Campus Hagenberg}
\date{23 July 2025}

% ==============================================================
\begin{document}
% ==============================================================

% ----------------------------------------------------------------
% Title slide
% ----------------------------------------------------------------
\maketitle

% ----------------------------------------------------------------
% Agenda slide
% ----------------------------------------------------------------
\begin{frame}{Road map}
  \tableofcontents[hideallsubsections]
\end{frame}

% ================================================================
\section{Problem context}
% ================================================================

\begin{frame}{Why do we care?}
\begin{itemize}[<+->]
  \item CI/CD emits \alert{$\approx$ 10-20 GB} of build, test \& deploy logs \textit{per day}. 
  \item Manual \texttt{grep} slows the merge queue; critical faults slip through.
  \item Business \textbf{SLO}: feedback within \alert{\(\le\) 200 ms} per pipeline.
  \item Logs can leak customer IDs $\rightarrow$ \textbf{no SaaS export}.
\end{itemize}
\end{frame}

\begin{frame}{Operational pain points}
\begin{enumerate}[<+->]
  \item \textbf{Context-sensitivity} - identical tokens can be harmless or fatal.
  \item \textbf{Concept drift} - each merge may rename tests or switches.
  \item \textbf{Latency pressure} - analysis must finish before runner teardown.
  \item \textbf{Alert fatigue} - regex rule sets grow without bound.
\end{enumerate}
\end{frame}

% ================================================================
\section{Research questions}
% ================================================================

% --- visual RQ tree ------------------------------------------------

\begin{frame}{Research questions}
  \centering
  \begin{tikzpicture}[
      grow=down,                             % Baum wächst nach unten
      level distance=2.8cm,                  % vertikaler Abstand der Ebenen
      level 1/.style={sibling distance=4.8cm},% horizontaler Abstand der 3 Kinder
      box/.style = {rectangle, draw, rounded corners=3pt,
                    text width = 4.6cm, align = center,
                    minimum height = 1.05cm,
                    font = \small, fill = blockgray},
      arr/.style = {-{Stealth[length=3mm,width=2mm]}, thick}
    ]
    \node[box,text width=5cm] (main)
      {\textbf{RQ\textsubscript{main}}:\\[2pt]
       How can AI improve accuracy \& explainability\\
       of CI/CD log analysis?}
      child {
        node[box,text width=4.3cm]
          {\textbf{RQ1}: Capability of a cloud LLM (ChatGPT)\\to interpret logs}
      }
      child {
        node[box,text width=4.3cm]
          {\textbf{RQ2}: How does a local IF+RF stack compare?}
      }
      child {
        node[box,text width=4.3cm]
          {\textbf{RQ3}: Integration hurdles inside existing pipelines}
      }
    ;
  \end{tikzpicture}
\end{frame}



% ================================================================
\section{Method}
% ================================================================

\subsection{Feature engineering}
\begin{frame}{Vectorisation pipeline \ding{172}}
\begin{columns}
  \column{.55\linewidth}
    \begin{enumerate}[<+->]
      \item \textbf{Normalise} - strip timestamps, colours, IDs.
      \item \textbf{Tokenise} - 1-2-grams.
      \item Weight with \tfidf.
      \item Produce \(50\,000\)-dim sparse vector; \(>10^{5}\) lines / s on one core.
    \end{enumerate}
  \column{.45\linewidth}
    \centering
    \begin{tikzpicture}[node distance=1.1cm]
      \node[box,text width=2cm]{log line};
      \node[box,right=1.2cm of {$(current bounding box.east)!0.5!(current bounding box.east)$},text width=2.4cm] (vec){sparse vector};
      \draw[arr] (1.1,0) -- (vec.west);
    \end{tikzpicture}
\end{columns}
\end{frame}

% \subsection{Algorithms}
% \begin{frame}{Isolation Forest \ding{173} - intuition}
% \begin{columns}
%   \column{.55\linewidth}
%   \begin{itemize}[<+->]
%     \item Random binary partitioning isolates unusual lines in fewer splits.
%     \item Score \(s(x)=2^{-h(x)/c(n)}\) $\in$ [0,1] \\ if high $\rightarrow$ outlier.
%     \item CPU-only: \( \approx 30\,\mu s\) per line.
%   \end{itemize}
%   \column{.45\linewidth}
%     \centering
%     \begin{adjustbox}{max width=.95\linewidth}
%       \begin{tikzpicture}[scale=.8]
%         \draw[fill=blockgray] (0,0) rectangle (3,3);
%         \node at (3.2,-0.5){feature 1};
%         \node[box,minimum width=.9cm,minimum height=.7cm] at (.7,.8){outlier};
%         \node[box,minimum width=.9cm,minimum height=.7cm] at (2.4,2.1){normal};
%         \draw[dashed] (1.5,0)--(1.5,3) (-1,1.45)--(4,1.45);
%       \end{tikzpicture}
%     \end{adjustbox}
% \end{columns}
% \end{frame}

\subsection{Algorithms}
\begin{frame}{Isolation Forest \ding{173} - intuition}
\begin{columns}
  \column{.55\linewidth}
  \begin{itemize}[<+->]
    \item Random binary partitioning isolates unusual lines in fewer splits.
    \item Score \(s(x)=2^{-h(x)/c(n)}\) $\in$ [0,1] \\ if high $\rightarrow$ outlier.
    \item CPU-only: \( \approx 30\,\mu s\) per line.
  \end{itemize}
  \column{.45\linewidth}
    \centering
    \begin{tikzpicture}[%
  level distance = 1.3cm,
  level 1/.style={sibling distance=1.4cm},
  level 2/.style={sibling distance=0.8cm},
  every node/.style={circle, draw, minimum size=6mm, inner sep=0pt},
  normal/.style  ={fill=gray!10},
  potout/.style   ={fill=blue!60},
  outlier/.style  ={fill=red!70},
  empty/.style    ={fill=white}
]

% --- Baum --------------------------------------------------------
\node[empty] {}                                 % root
  child {node[empty] {}                         % linke Teilwurzel
    child {node[potout] {}}                     % potenzieller Outlier
    child {node[empty] {}
      child {node[empty] {}}
      child {node[potout] {}}
    }
  }
  child {node[outlier] {}};                     % echter Outlier rechts

% --- Legende -----------------------------------------------------
\begin{scope}[xshift=2.cm, yshift=-0.1cm, every node/.style={anchor=west}]
  \node[normal]  (n1) at (0,0)   {}; \node at (0.6,0)   {normal};
  \node[potout]  (n2) at (0,-0.6){}; \node at (0.6,-0.6){potential outlier};
  \node[outlier] (n3) at (0,-1.2){}; \node at (0.6,-1.2){outlier};
\end{scope}
\end{tikzpicture}

\end{columns}
\end{frame}

% \begin{frame}{Random Forest \ding{174} - error labelling}
% \begin{columns}
%   \column{.55\linewidth}
%   \begin{itemize}[<+->]
%     \item Converts \IForest-flagged lines into 7 domain labels.
%     \item Majority vote \Rightarrow deterministic, auditable output.
%     \item Nightly retrain < 90 s; warm-start supports drift handling.
%   \end{itemize}
%   \column{.45\linewidth}
%     \centering
%     \begin{adjustbox}{max width=.9\linewidth}
%       \begin{tikzpicture}[node distance=1cm]
%         \node[box,text width=1.8cm]{vector};
%         \node[box,right=1.8cm of {$(current bounding box.east)!0.5!(current bounding box.east)$},text width=1.8cm] (t1){tree 1};
%         \node[box,below=of t1,text width=1.8cm] (t2){tree 2};
%         \node[box,below=of t2,text width=1.8cm] (t3){tree ...};
%         \node[box,right=1.8cm of t2,text width=2.1cm] (vote){label};
%         \draw[arr] (0,0) -- (t1.west);
%         \draw[arr] (0,0) -- (t2.west);
%         \draw[arr] (0,0) -- (t3.west);
%         \draw[arr] (t1) -- (vote);
%         \draw[arr] (t2) -- (vote);
%         \draw[arr] (t3) -- (vote);
%       \end{tikzpicture}
%     \end{adjustbox}
% \end{columns}
% \end{frame}

\begin{frame}{Random Forest \ding{174} - error labelling}
\begin{columns}
  \column{.55\linewidth}
  \begin{itemize}[<+->]
    \item Converts \IForest-flags into 7 domain labels.
    \item Majority vote = deterministic, auditable output.
    \item Nightly retrain < 90 s; warm-start handles drift.
  \end{itemize}
  \column{.45\linewidth}
    \centering
    \begin{adjustbox}{max width=.85\linewidth}
      \begin{tikzpicture}[node distance=1cm]
        \node[box,text width=1.7cm] (v){vector};
        \node[box,right=1.7cm of v,text width=1.6cm] (t1){tree 1};
        \node[box,below=of t1,text width=1.6cm] (t2){tree 2};
        \node[box,below=of t2,text width=1.6cm] (t3){tree x};
        \node[box,right=1.7cm of t2,text width=2cm] (vote){label};
        \draw[arr](v)--(t1);
        \draw[arr](v)--(t2);
        \draw[arr](v)--(t3);
        \draw[arr](t1)--(vote);
        \draw[arr](t2)--(vote);
        \draw[arr](t3)--(vote);
      \end{tikzpicture}
    \end{adjustbox}
\end{columns}
\end{frame}

% ================================================================

\section{Architecture}
% ================================================================

\begin{frame}{End-to-end pipeline (< 40 ms inline)}
\centering
\begin{adjustbox}{max width=.98\linewidth,max height=.9\textheight}
  % (diagram identical, but box colour updated via style)
  \begin{tikzpicture}[node distance=1.2cm and 1.8cm]
    \node[box] (raw){Raw log stream};
    \node[box,below=of raw] (norm){Normalise};
    \node[box,below=of norm] (vect){Tokenise \& TF-IDF};
    \node[box,below=of vect] (ifor){\IForest};
    \node[box,below=of ifor,xshift=+2.6cm] (rfor){\RForest};
    \node[box,below=of rfor] (json){JSON verdict};
    \node[box,below=of ifor,xshift=-5.3cm] (pass){pass-through};
    \draw[arr] (raw)--(norm)--(vect)--(ifor);
    \draw[arr] (ifor)--node[lab]{score$<\tau$}(pass);
    \draw[arr] (ifor)--node[lab]{score$\ge\tau$}(rfor)--(json);
    \node[side,right=3.7cm of vect] (cron){nightly GitLab job};
    \node[side,below=of cron] (train){retrain IF \& RF};
    \draw[arr,dashed] (cron)--(train);
    \draw[arr,dashed] (train.west)+(-.2,.15)|-(ifor.east);
    \draw[arr,dashed] (train.west)+(-.2,-.15)|-(rfor.east);
    \node[draw,rounded corners=4pt,inner sep=9pt,fit=(raw)(json),label=above:{inline path (< 40 ms)}]{};
    \node[draw,rounded corners=4pt,inner sep=4pt,fit=(cron)(train),label=above:{nightly adaptation}]{};
  \end{tikzpicture}
\end{adjustbox}
\end{frame}

% ================================================================
\section{Data \& evaluation}
% ================================================================

\begin{frame}{Datasets \& metrics}
\begin{columns}
  \column{.55\linewidth}
  \begin{itemize}[<+->]
     \item 117 k \textit{macOS} logs + 655 k \textit{OpenSSH} logs
     \item 504 labelled anomalies ($\approx$1 : 200 skew)
     \item Split 70 / 15 / 15 \% (train / val / test)
     \item Metrics: Macro-F\textsubscript{1}, AUPRC, p99.9 latency
  \end{itemize}
  \column{.45\linewidth}
    \centering
    % simple mini diagram only, no scaling
    % \begin{tikzpicture}[node distance=.9cm]
    %   \node[box,text width=2.5cm]{raw logs};
    %   \node[box,below=of {$(current bounding box.east)!0.5!(current bounding box.east)$}] (norm){normalise};
    %   \node[box,below=of norm,text width=2cm] (vec){TF-IDF};
    %   \draw[arr] (0,-0.52) -- (norm.west);
    %   \draw[arr] (norm) -- (vec);
    % \end{tikzpicture}

    \begin{tikzpicture}[node distance=1cm,
      box/.style={
        draw, rounded corners=3pt, fill=gray!20, 
        minimum width=3cm, minimum height=1cm, align=center},
      arr/.style={->, thick, shorten >=2pt}
    ]
    \node[box] (raw)  {raw logs};
    \node[box, below=of raw]  (norm) {normalise};
    \node[box, below=of norm] (vec) {TF–IDF};
    % gerade Pfeile von Mitte zu Mitte
    \draw[arr] (raw.south) -- (norm.north);
    \draw[arr] (norm.south) -- (vec.north);
  \end{tikzpicture}
\end{columns}
\end{frame}

% ================================================================
\section{Results}
% ================================================================

% \begin{frame}{Headline numbers}
% \centering
% \begin{tabular}{lccc}
%   \toprule
%    \& Precision \& Recall \& F\textsubscript{1} \\
%   \midrule
%   Detection (\IForest) \& 0.91 \& 0.88 \& 0.89 \\
%   Classification (\RForest) \& 0.99 \& 0.99 \& 0.99 \\
%   \bottomrule
% \end{tabular}

% \begin{frame}{Headline numbers}
% \centering
% \begin{tabular}{lccc}
%   \toprule
%    & Precision & Recall & F\textsubscript{1} \\
%   \midrule
%   Detection (\IForest) & 0.91 & 0.88 & 0.89 \\
%   Classification (\RForest) & 0.99 & 0.99 & 0.99 \\
%   \bottomrule
% \end{tabular}

\begin{frame}{Headline numbers}
\centering
\begin{tabular}{lccc}
  \toprule
   & Precision & Recall & F\textsubscript{1} \\
  \midrule
  Detection (\IForest) & 0.91 & 0.88 & 0.89 \\
  Classification (\RForest) & 0.99 & 0.99 & 0.99 \\
  \bottomrule
\end{tabular}

\vspace{.8em}
\small
Throughput: 45 000 lines/s \;|\; p99.9 latency: 37 ms
\end{frame}

% ================================================================
\section{Impact}
% ================================================================

\begin{frame}{Operational impact}
\begin{itemize}[<+->]
  \item \textbf{Latency}: minutes $\rightarrow$ \textbf{milliseconds} (inline verdict).
  \item \textbf{Cost-free}: 2.3 k \LOC{}, CPU-only, no token fees.
  \item \textbf{GDPR compliant}: logs never leave the VPN.
\end{itemize}
\end{frame}

% ================================================================
\section{Wrap-up}
% ================================================================

\begin{frame}{Take-away}
\vspace{2em}
\centering
{\Large
  \textbf{Light-weight on-prem ML matches AIOps SaaS}\par
  \vspace{.4em}
  without latency, cost or privacy pain.
}

\vspace{2.2em}
\small
Questions welcome - thank you!
\end{frame}

\end{document}
